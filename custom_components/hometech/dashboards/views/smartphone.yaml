title: HomeTech
path: home
icon: mdi:home
layout: vertical
cards:
  - type: vertical-stack
    cards:
      - type: custom:mushroom-chips-card
        alignment: center
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: "#luce"
            double_tap_action:
              action: perform-action
              target:
                label_id: luci
              perform_action: light.turn_off
              data: {}
            icon: mdi:lamps-outline
            icon_color: amber
            content: >-
              {% set entities = [
                states['light.luce_bagno'], states['light.luce_camera'],
                states['light.led_cucina_rgb'], states['light.luce_cucina'],
                states['light.led_cucina_white'], states['light.led_cucina'],
                states['light.luce_ingresso'], states['light.luce_lavanderia'],
                states['light.luce_sala'], states['light.luce_balcone'],
                states['light.led_divano_s'], states['light.led_divano_c'],
                states['light.led_divano_d']] %}
              {{ entities | selectattr('state','eq','on') | list | count }}
          - type: template
            tap_action:
              action: navigate
              navigation_path: "#sala_tapparella"
            double_tap_action:
              action: perform-action
              target:
                label_id: tapparelle
              perform_action: cover.close_cover
              data: {}
            icon: mdi:blinds-horizontal
            icon_color: cyan
            content: >-
              {% set entities = [
                states['cover.tapparella_sala'],
                states['cover.tapparella_camera']] %}
              {{ entities | selectattr('state','eq','open') | list | count }}
          - type: template
            tap_action:
              action: navigate
              navigation_path: "#sala_termostato"
            double_tap_action:
              action: perform-action
              target:
                label_id: termostato
              perform_action: climate.turn_off
              data: {}
            icon: mdi:home-thermometer-outline
            icon_color: orange
            content: >-
              {% set entities = [
                states['climate.termostato_camera'],
                states['climate.termostato_sala']] %}
              {{ entities | selectattr('state','ne','off') | list | count }}
          - type: template
            tap_action:
              action: navigate
              navigation_path: "#automazione"
            icon: mdi:robot
            icon_color: green
            content: >-
              {% set entities = [
                states['switch.schedule_tapparella_sala'],
                states['switch.schedule_tapparella_camera'],
                states['switch.schedule_luce_ingresso']] %}
              {{ entities | selectattr('state','eq','on') | list | count }}
          - type: template
            tap_action:
              action: navigate
              navigation_path: "#sensore"
            double_tap_action:
              action: call-service
              service: switch.turn_off
              target:
                entity_id: switch.presa_smart
            icon: mdi:leak
            icon_color: blue
            content: ""
          - type: template
            tap_action:
              action: navigate
              navigation_path: "#energia_annuale"
            icon: mdi:home-lightning-bolt-outline
            icon_color: amber
            content: ""
      - type: custom:mushroom-template-card
        primary: >-
          {% set time = now().hour %}
          {% if (time >= 18) %} Buonasera, {{user}}!
          {% elif (time >= 12) %} Buon pomeriggio, {{user}}!
          {% elif (time >= 5) %} Buongiorno, {{user}}!
          {% else %} Ciao, {{user}}! {% endif %}
        icon: mdi:hand-wave
        icon_color: orange
        layout: horizontal
        secondary: >-
          Interna: {{ states('sensor.t_u_casa_temperature') }} Â°C |
          {{ states('sensor.t_u_casa_humidity') }} %
      - type: custom:swipe-card
        parameters:
          effect: flip
          autoHeight: false
          autoplay:
            delay: 5000
        cards:
          - type: custom:clock-weather-card
            entity: weather.forecast_casa
            sun_entity: sun.sun
            temperature_sensor: sensor.outdoor_temm
            humidity_sensor: sensor.outdoor_humidity
            weather_icon_type: line
            animated_icon: true
            forecast_rows: 4
            time_pattern: HH:mm
            time_format: 24
            date_pattern: ccc d.MM.yy
            hide_today_section: false
            hide_forecast_section: false
            show_humidity: false
            hide_clock: true
            hide_date: true
            hourly_forecast: false
            use_browser_time: false
            time_zone: null
          - type: custom:horizon-card
      - type: grid
        square: true
        columns: 4
        cards:
          - show_name: false
            show_icon: true
            type: button
            tap_action:
              action: more-info
            icon: mdi:shield-lock-outline
            show_state: true
            hold_action:
              action: none
            entity: alarm_control_panel.allarme
          - show_name: false
            show_icon: true
            type: button
            icon: mdi:key-chain-variant
            hold_action:
              action: toggle
            show_state: true
            tap_action:
              action: navigate
              navigation_path: "#serratura"
          - show_name: false
            show_icon: true
            type: button
            tap_action:
              action: navigate
              navigation_path: "#telecamera"
            icon: mdi:video-outline
            hold_action:
              action: none
          - show_name: false
            show_icon: true
            type: button
            tap_action:
              action: navigate
              navigation_path: "#j.a.r.v.i.s"
            icon: mdi:raspberry-pi
            hold_action:
              action: none
      - type: custom:swipe-card
        parameters:
          effect: coverflow
        cards:
          - initial_view: listWeek
            type: calendar
            entities:
              - calendar.andrea
              - calendar.condiviso
              - calendar.federica
              - calendar.lavoro
          - type: picture-elements
            elements:
              - type: image
                title: casa
                image: /local/gif/home.png
                style:
                  left: 50.5%
                  top: 50%
                  width: 25%
              - type: image
                title: energia
                style:
                  left: 50%
                  top: 12%
                  width: 15%
                image: /local/gif/energia.png
              - type: state-label
                entity: sensor.somma_em06_power
                style:
                  left: 50%
                  top: 35%
                  font-size: 20px
              - type: image
                image: /local/gif/freccia.png
                title: freccia
                style:
                  left: 50%
                  top: 25%
                  width: 5%
              - type: image
                image: /local/gif/freccia.png
                title: freccia
                style:
                  left: 30%
                  top: 60%
                  width: 5%
                  transform: rotate(50deg)
              - type: image
                image: /local/gif/freccia.png
                title: freccia
                style:
                  left: 50%
                  top: 65%
                  width: 5%
              - type: image
                image: /local/gif/freccia.png
                title: freccia
                style:
                  left: 67%
                  top: 60%
                  width: 5%
                  transform: rotate(310deg)
              - type: state-label
                entity: sensor.somma_em06_consumi
                style:
                  left: 80%
                  top: 20%
                  font-size: 20px
                  background-color: rgba(153, 153, 153, 0.8)
                  color: white
            image: /local/gif/sfondo2.png
            grid_options:
              columns: 12
              rows: 7
          - type: logbook
            target:
              entity_id:
                - alarm_control_panel.allarme
              label_id:
                - luci
                - termostato
                - tapparelle
                - porta
                - telecamera
            hours_to_show: 24
